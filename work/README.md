
# Overview

This is a workspace area for the development of the data model and subsequent generation
of the various products derived from the vo-dml/XML representation of the model.

Since there are many paths for generating the data model documents, the products themselves
are stored in the other directories of this repository, and no software is installed in this
workspace.  Instead, we provide the instructions for duplicating the workflow used to create
the current products.

# Data Modeling Tool

The modeling itself is currently done using Modelio.  This includes the UML diagrams, and documentation
of the model elements.  This is exported as an XMI (UML-2.4.1 format) document which can be found in the 'model'
sibling directory.  The XMI file is processed using the VO-DML Toolkit to generate the VO-DML/XML file and
other products.

# VO-DML Toolkit plugin

This toolkit provides a set of tasks for generating and translating vo-dml/XML files.
For details on the toolkit, please see the "[Using the VO-DML Gradle Plugin](https://github.com/ivoa/vo-dml/tree/master/tools)"
page of the [VO-DML repository](https://github.com/ivoa/vo-dml).

The files included here are those necessary to execute the tasks outlined below.

## Setup

* Clone this repository
  The toolkit is a command-line system

* "[VO-DML Tools Guide](https://ivoa.github.io/vo-dml/)"
  Guide on the VO-DML Toolkit and how to use it.

* Install gradle
  Instructions can be found on the "[Using the VO-DML Gradle Plugin](https://github.com/ivoa/vo-dml/tree/master/tools)" page.
  There is no need to run the `gradle init` command, this space includes the files generated by that process tailored to
  this particular model and directory structure.
  
  Note: While gradle requires Java 8 or higher, the toolkit itself requires Java 11 in your environment.

    * build.gradle.kts
        * gradle connection to vo-dml toolkit plugin
	* dependencies and required information (directory specs)
	* register additional tasks
    * settings.gradle.kts
        * gradle support
    * bindings_<model>_model.xml
        * mapping between model and generated files.


## Running Tasks

The toolkit contains several tasks which can be used to generate and validate VO-DML/XML files, or translate them into
various other formats or to code.  These instructions are focused on the tasks used to create and validate the
VO-DML/XML files and generation of the standard HTML documentation.

* ```%> gradle UMLToVODML```
  This model is currently developed using the Modelio UML tool and exported to UML-2.4.1 format.
  This command translates the XMI file into the VO-DML/XML representation.

    * input, output, and translation script are specified with the task registration in build.gradle.kts
    * the task locates the xmi file, and executes the specified translation script
    * output is written to ./src/main/vo-dml/

* ```%> gradle vodmlValidate```
  Runs the VO-DML validation utility on the vo-dml/xml file.

    * locates the vo-dml/XML file using the information contained in build.gradle.kts
    * executes the validation utility
    * output is echoed to the screen

* ```%> gradle vodslToVodml --dml=<file spec for vo-dml/xml file> --dsl=<file spec to vodsl file>```
  Runs a utility to VO-DML/XML files from models described in vodsl format.
  
    * locates the vodsl file using the information contained in build.gradle.kts
    * executes the translation task
    * output is written to ./src/main/vodsl/

* ```%> gradle vodmlDoc```
  Runs a utility to generate HTML (and Tex) representation of the model.
  Note:  This model does not use the Tex format output from this utility for the actual PDF document.
  
    * locates the vo-dml/XML file using the information contained in build.gradle.kts
    * executes the translation task
    * output is written to ./build/generated/docs/vodml


* Schema Generation
